<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>OpenCV Paint Editor</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <!-- ========================= TOP BAR ========================= -->
    <div id="top-bar">
        <div class="group">
            <input type="file" id="fileInput" accept="image/*">

            <!-- –í—ã–±–æ—Ä —Ñ–æ—Ä–º–∞—Ç–∞ -->
            <select id="exportFormat">
                <option value="png">PNG</option>
                <option value="jpg">JPG</option>
                <option value="tiff">TIFF</option>
            </select>
            <button onclick="exportImage()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>

            <button onclick="undo()">‚Ü© –û—Ç–º–µ–Ω–∏—Ç—å</button>
            <button onclick="resetImage()">‚ü≤ –°–±—Ä–æ—Å</button>
        </div>

        <div class="group collapsible">
            <input type="number" id="rotateAngle" placeholder="–£–≥–æ–ª (¬∞)">
            <button onclick="rotateImage()">‚ü≥ –ü–æ–≤–µ—Ä–Ω—É—Ç—å</button>
            <button onclick="flipHorizontal()">‚Üî –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ</button>
            <button onclick="flipVertical()">‚Üï –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ</button>
            <button onclick="flipBoth()">‚áã –û–±–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</button>
        </div>

        <div class="group collapsible">
            <input type="number" id="resizeWidth" placeholder="–®–∏—Ä–∏–Ω–∞ (px)">
            <input type="number" id="resizeHeight" placeholder="–í—ã—Å–æ—Ç–∞ (px)">
            <select id="interpolation">
                <option value="nearest">–ë–ª–∏–∂–∞–π—à–∏–π —Å–æ—Å–µ–¥</option>
                <option value="bilinear">–ë–∏–ª–∏–Ω–µ–π–Ω–∞—è</option>
                <option value="bicubic" selected>–ë–∏–∫—É–±–∏—á–µ—Å–∫–∞—è</option>
            </select>
            <button onclick="resizeImage()">–ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä</button>
        </div>

        <div class="group collapsible">
            <label>–Ø—Ä–∫–æ—Å—Ç—å</label>
            <input type="range" id="brightness" min="-100" max="100" value="0" oninput="applyBrightnessContrast()">
            <label>–ö–æ–Ω—Ç—Ä–∞—Å—Ç</label>
            <input type="range" id="contrast" min="0.5" max="3" step="0.1" value="1" oninput="applyBrightnessContrast()">
        </div>

        <div class="group collapsible">
            <label>R</label>
            <input type="range" id="r" min="-100" max="100" value="0" oninput="applyColorBalance()">
            <label>G</label>
            <input type="range" id="g" min="-100" max="100" value="0" oninput="applyColorBalance()">
            <label>B</label>
            <input type="range" id="b" min="-100" max="100" value="0" oninput="applyColorBalance()">
        </div>

        <div class="group collapsible">
            <label>–®—É–º œÉ</label>
            <input type="number" id="noise" value="10">
            <button onclick="addGaussianNoise()">–î–æ–±–∞–≤–∏—Ç—å —à—É–º</button>
            <label>–†–∞–∑–º—ã—Ç–∏–µ</label>
            <input type="number" id="blur" value="3">
            <button onclick="applyBlur('average')">–°—Ä–µ–¥–Ω–µ–µ</button>
            <button onclick="applyBlur('gaussian')">–ì–∞—É—Å—Å–æ–≤–æ</button>
            <button onclick="applyBlur('median')">–ú–µ–¥–∏–∞–Ω–Ω–æ–µ</button>
        </div>

        <div class="group collapsible">
            <input type="number" id="cropX" placeholder="X">
            <input type="number" id="cropY" placeholder="Y">
            <input type="number" id="cropW" placeholder="–®–∏—Ä–∏–Ω–∞ (px)">
            <input type="number" id="cropH" placeholder="–í—ã—Å–æ—Ç–∞ (px)">
            <button onclick="cropImage()">–û–±—Ä–µ–∑–∞—Ç—å</button>
        </div>

        <button id="toggle-ui" onclick="toggleUI()">‚ò∞</button>
    </div>

    <!-- ========================= WORKSPACE ========================= -->
    <div id="workspace-container">
        <canvas id="canvas"></canvas>
    </div>

    <!-- ========================= SIZE PANEL ========================= -->
    <div id="zoom-panel">
        <span id="canvas-size">0√ó0 px</span>
    </div>

    <!-- ========================= SCRIPTS ========================= -->
    <script src="/static/js/main.js"></script>
    <script src="/static/js/filters.js"></script>
    <script src="/static/js/transform.js"></script>
    <script src="/static/js/hotkeys.js"></script>
</body>
</html>
