<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>OpenCV Paint Editor</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <!-- ========================= TOP BAR ========================= -->
    <div id="top-bar">
        <div class="group">
            <input type="file" id="fileInput" accept="image/*">
            <button onclick="exportImage()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button onclick="undo()">‚Ü© Undo</button>
            <button onclick="resetImage()">‚ü≤ Reset</button>
            <button onclick="clearCanvas()">‚úñ –û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>

        <div class="group collapsible">
            <input type="number" id="rotateAngle" placeholder="–£–≥–æ–ª">
            <button onclick="rotateImage()">‚ü≥ –ü–æ–≤–µ—Ä–Ω—É—Ç—å</button>
            <button onclick="flipHorizontal()">‚Üî –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å</button>
            <button onclick="flipVertical()">‚Üï –í–µ—Ä—Ç–∏–∫–∞–ª—å</button>
            <button onclick="flipBoth()">‚áã –û–±–∞</button>
        </div>

        <div class="group collapsible">
            <input type="number" id="resizeWidth" placeholder="–®–∏—Ä–∏–Ω–∞">
            <input type="number" id="resizeHeight" placeholder="–í—ã—Å–æ—Ç–∞">
            <select id="interpolation">
                <option value="nearest">Nearest</option>
                <option value="bilinear">Bilinear</option>
                <option value="bicubic" selected>Bicubic</option>
            </select>
            <button onclick="resizeImage()">Resize</button>
        </div>

        <div class="group collapsible">
            <label>–Ø—Ä–∫–æ—Å—Ç—å</label>
            <input type="range" id="brightness" min="-100" max="100" value="0" oninput="applyBrightnessContrast()">
            <label>–ö–æ–Ω—Ç—Ä–∞—Å—Ç</label>
            <input type="range" id="contrast" min="0.5" max="3" step="0.1" value="1" oninput="applyBrightnessContrast()">
        </div>

        <div class="group collapsible">
            <label>R</label>
            <input type="range" id="r" min="-100" max="100" value="0" oninput="applyColorBalance()">
            <label>G</label>
            <input type="range" id="g" min="-100" max="100" value="0" oninput="applyColorBalance()">
            <label>B</label>
            <input type="range" id="b" min="-100" max="100" value="0" oninput="applyColorBalance()">
        </div>

        <div class="group collapsible">
            <label>Noise œÉ</label>
            <input type="number" id="noise" value="10">
            <button onclick="addGaussianNoise()">Add Noise</button>
            <label>Blur ksize</label>
            <input type="number" id="blur" value="3">
            <button onclick="applyBlur('average')">Average</button>
            <button onclick="applyBlur('gaussian')">Gaussian</button>
            <button onclick="applyBlur('median')">Median</button>
        </div>

        <div class="group collapsible">
            <input type="number" id="cropX" placeholder="X">
            <input type="number" id="cropY" placeholder="Y">
            <input type="number" id="cropW" placeholder="–®–∏—Ä–∏–Ω–∞">
            <input type="number" id="cropH" placeholder="–í—ã—Å–æ—Ç–∞">
            <button onclick="cropImage()">–û–±—Ä–µ–∑–∞—Ç—å</button>
        </div>

        <button id="toggle-ui" onclick="toggleUI()">‚ò∞</button>
    </div>

    <!-- ========================= WORKSPACE ========================= -->
    <div id="workspace-container">
        <canvas id="canvas"></canvas>
    </div>

    <!-- ========================= SIZE PANEL ========================= -->
    <div id="zoom-panel">
        <span id="canvas-size">0x0 px</span>
    </div>

    <script src="/static/js/main.js"></script>
    <script src="/static/js/filters.js"></script>
    <script src="/static/js/transform.js"></script>
</body>
</html>
